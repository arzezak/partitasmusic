<!DOCTYPE html>
<!--
	Editorial by HTML5 UP
	html5up.net | @ajlkn
	Free for personal and commercial use under the CCA 3.0 license (html5up.net/license)
-->
<html>
  <head>
    <title>Partitas Music | Profiles</title>
    <meta charset="utf-8" />
    <meta
      name="viewport"
      content="width=device-width, initial-scale=1, user-scalable=no"
    />
    <link
      rel="icon"
      type="image/png"
      href="./images/branding/favicon-PM-orange.png"
    />
    <link rel="stylesheet" href="./assets/css/main.css" />
  </head>

  <body class="is-preload">
    <!-- Wrapper -->
    <div id="wrapper">
      <!-- Main -->
      <div id="main">
        <div class="inner">
          <!-- Header -->
          <%- include('partials/header'); %>

          <!-- Section -->
          <section>
            <header class="major">
              <h2>Contributions</h2>
            </header>
            <div class="posts">
              <article>
                <div class="image">
                  <img id="artist-1-pic" src="./images/image1.jpeg" alt="" />
                </div>
                <div class="title-header">
                  <h3 id="artist-1-name"></h3>
                  <h4 id="artist-1-country"></h4>
                </div>
                <h3 id="artist-1-title"></h3>
                <p id="artist-1-description"></p>
                <form
                  id="artist-1-score"
                  action=""
                  style="width: 100%"
                  method="GET"
                  class="button primary icon solid fa-download"
                >
                  download score
                </form>
                <audio
                  style="width: 100%"
                  preload="none"
                  class="mobile-audio"
                  controls=""
                >
                  <source src="horse.mp3" type="audio/mpeg" />
                  Your browser does not support the audio tag.
                </audio>
              </article>
              <article>
                <a href="/profile" class="image"
                  ><img src="./images/image2.svg" alt=""
                /></a>
                <div class="title-header">
                  <h3>Artist 2</h3>
                  <h4>USA</h4>
                </div>
                <h3>Piece name</h3>
                <p>
                  Aenean ornare velit lacus, ac varius enim lorem ullamcorper
                  dolore. Proin aliquam facilisis ante interdum. Sed nulla amet
                  lorem feugiat tempus aliquam.
                </p>
                <form
                  action="/login"
                  style="width: 100%"
                  method="GET"
                  class="button primary icon solid fa-download"
                >
                  download score
                </form>
                <audio
                  style="width: 100%"
                  preload="none"
                  class="mobile-audio"
                  controls=""
                ></audio>
              </article>
              <article>
                <a href="/profile" class="image"
                  ><img src="./images/image3.svg" alt=""
                /></a>
                <div class="title-header">
                  <h3>Artist 3</h3>
                  <h4>Argentina</h4>
                </div>
                <h3>Piece name</h3>
                <p>
                  Aenean ornare velit lacus, ac varius enim lorem ullamcorper
                  dolore. Proin aliquam facilisis ante interdum. Sed nulla amet
                  lorem feugiat tempus aliquam.
                </p>
                <form
                  action="/login"
                  style="width: 100%"
                  method="GET"
                  class="button primary icon solid fa-download"
                >
                  download score
                </form>
                <audio
                  style="width: 100%"
                  preload="none"
                  class="mobile-audio"
                  controls=""
                ></audio>
              </article>
            </div>
          </section>
        </div>
      </div>

      <!-- Sidebar -->
      <%- include('partials/sidebar'); %>
    </div>

    <!-- Scripts -->
    <%- include('partials/scripts'); %>

    <script>
      getContributors()
        .then((json) => {
          document.getElementById("artist-1-pic").src = json.profilePictureUrl;
          document.getElementById("artist-1-name").textContent = json.name;
          document.getElementById("artist-1-country").textContent =
            json.country;
          document.getElementById("artist-1-title").textContent = json.title;
          document.getElementById("artist-1-description").textContent =
            json.description;
          document.getElementById(
            "artist-1-score"
          ).action = `/api/scores/${json._id}`;
        })
        .catch((error) => {
          console.log("error fetching contributors");
          console.error(error);
        });

      async function getContributors() {
        const response = await fetch("/api");
        const json = await response.json();
        return json;
      }
    </script>
  </body>
</html>
